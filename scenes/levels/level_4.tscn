[gd_scene load_steps=13 format=3 uid="uid://dxiqoa00bnrk2"]

[ext_resource type="PackedScene" uid="uid://be3c7t3180orp" path="res://scenes/map_units/grounds/basic_ground.tscn" id="1_06474"]
[ext_resource type="Script" uid="uid://dsjdg8fqcsonj" path="res://scripts/levels/level_4_manager.gd" id="1_w6h2s"]
[ext_resource type="PackedScene" uid="uid://p6dopje3btqk" path="res://scenes/characters/player/Pipe_player.tscn" id="3_ogj6a"]
[ext_resource type="Script" uid="uid://bvx6bpkegqfs7" path="res://scripts/map_units/trail_system.gd" id="4_ogj6a"]
[ext_resource type="Texture2D" uid="uid://ufso8s6ib6or" path="res://assets/sprites/map_units/mirror_frame.png" id="5_anwe6"]
[ext_resource type="Script" path="res://scripts/map_units/door_system.gd" id="5_ts8eg"]
[ext_resource type="Script" uid="uid://ccvwii8dy8t0d" path="res://src/test/checker.gd" id="6_rej77"]
[ext_resource type="PackedScene" uid="uid://hg7ttp1018uk" path="res://scenes/map_units/pressure_plate.tscn" id="7_5vn0v"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_anwe6"]
size = Vector2(79, 473)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_rej77"]
size = Vector2(692, 52)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_5vn0v"]
size = Vector2(170, 47)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_ts8eg"]
size = Vector2(170, 20)

[node name="Level4" type="Node2D"]
script = ExtResource("1_w6h2s")

[node name="BasicGround" parent="." instance=ExtResource("1_06474")]

[node name="Steel_Pipe" parent="." instance=ExtResource("3_ogj6a")]
position = Vector2(105, -33)

[node name="TrailSystem" type="Node2D" parent="."]
script = ExtResource("4_ogj6a")

[node name="Timer" type="Timer" parent="TrailSystem"]
wait_time = 0.15
autostart = true

[node name="DoorSystem" type="Node2D" parent="."]
script = ExtResource("5_ts8eg")

[node name="Door" type="StaticBody2D" parent="DoorSystem"]
collision_layer = 2
collision_mask = 0

[node name="Sprite2D" type="Sprite2D" parent="DoorSystem/Door"]
position = Vector2(581.5, 159.5)
scale = Vector2(4.937499, 29.312502)
texture = ExtResource("5_anwe6")

[node name="CollisionShape2D" type="CollisionShape2D" parent="DoorSystem/Door"]
position = Vector2(581.5, 157.5)
shape = SubResource("RectangleShape2D_anwe6")

[node name="Ceil" type="StaticBody2D" parent="DoorSystem"]

[node name="Sprite2D" type="Sprite2D" parent="DoorSystem/Ceil"]
position = Vector2(274.00003, -98)
scale = Vector2(43.250004, 3.125)
texture = ExtResource("5_anwe6")

[node name="CollisionShape2D" type="CollisionShape2D" parent="DoorSystem/Ceil"]
position = Vector2(274, -99)
shape = SubResource("RectangleShape2D_rej77")

[node name="Platform" type="StaticBody2D" parent="DoorSystem"]
position = Vector2(0, 41)

[node name="Sprite2D" type="Sprite2D" parent="DoorSystem/Platform"]
position = Vector2(458.00003, 105.00001)
scale = Vector2(10.624999, 2.9999998)
texture = ExtResource("5_anwe6")

[node name="CollisionShape2D" type="CollisionShape2D" parent="DoorSystem/Platform"]
position = Vector2(458, 104.5)
shape = SubResource("RectangleShape2D_5vn0v")

[node name="Checker" type="Area2D" parent="DoorSystem/Platform"]
light_mask = 0
position = Vector2(374, 86)
script = ExtResource("6_rej77")

[node name="CollisionShape2D" type="CollisionShape2D" parent="DoorSystem/Platform/Checker"]
visible = false
position = Vector2(85, -2)
shape = SubResource("RectangleShape2D_ts8eg")

[node name="pressure_plate" parent="DoorSystem" instance=ExtResource("7_5vn0v")]
position = Vector2(449, 115)

[connection signal="timeout" from="TrailSystem/Timer" to="TrailSystem" method="_on_timer_timeout"]
[connection signal="body_entered" from="DoorSystem/Platform/Checker" to="DoorSystem/Platform/Checker" method="_on_body_entered"]
[connection signal="body_exited" from="DoorSystem/Platform/Checker" to="DoorSystem/Platform/Checker" method="_on_body_exited"]
